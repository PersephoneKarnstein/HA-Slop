log_dose:
  name: Log a dose
  description: Record an estrogen dose at the current time or a specified time.
  fields:
    entity_id:
      name: Entity
      description: The Estrannaise sensor entity.
      required: true
      selector:
        entity:
          domain: sensor
          integration: estrannaise
    model:
      name: Ester / method
      description: "The internal PK model key (e.g. 'EEn im', 'EV im', 'patch')."
      required: true
      selector:
        select:
          options:
            - "EB im"
            - "EV im"
            - "EEn im"
            - "EC im"
            - "EUn im"
            - "EUn casubq"
            - "patch"
    dose_mg:
      name: Dose amount
      description: Dose in mg (injections) or mcg/day (patches).
      required: true
      selector:
        number:
          min: 0.01
          max: 500
          step: 0.1
          mode: box
    timestamp:
      name: Timestamp
      description: Unix timestamp of when the dose was taken. Defaults to now.
      required: false
      selector:
        number:
          mode: box

log_blood_test:
  name: Log a blood test
  description: Record blood estradiol test results.
  fields:
    entity_id:
      name: Entity
      description: The Estrannaise sensor entity.
      required: true
      selector:
        entity:
          domain: sensor
          integration: estrannaise
    level_pg_ml:
      name: Estradiol level (pg/mL)
      description: The measured estradiol level in pg/mL.
      required: true
      selector:
        number:
          min: 0
          max: 5000
          step: 0.1
          mode: box
    timestamp:
      name: Timestamp
      description: Unix timestamp of when the blood was drawn. Defaults to now.
      required: false
      selector:
        number:
          mode: box
    notes:
      name: Notes
      description: Optional notes about the test.
      required: false
      selector:
        text:

delete_dose:
  name: Delete a dose
  description: Remove a dose record by its ID.
  fields:
    entity_id:
      name: Entity
      description: The Estrannaise sensor entity.
      required: true
      selector:
        entity:
          domain: sensor
          integration: estrannaise
    dose_id:
      name: Dose ID
      description: The database ID of the dose to delete.
      required: true
      selector:
        number:
          min: 1
          mode: box

delete_blood_test:
  name: Delete a blood test
  description: Remove a blood test record by its ID.
  fields:
    entity_id:
      name: Entity
      description: The Estrannaise sensor entity.
      required: true
      selector:
        entity:
          domain: sensor
          integration: estrannaise
    test_id:
      name: Test ID
      description: The database ID of the blood test to delete.
      required: true
      selector:
        number:
          min: 1
          mode: box

clear_data:
  name: Clear all data
  description: Delete all saved doses and blood test records. This cannot be undone.
  fields:
    entity_id:
      name: Entity
      description: The Estrannaise sensor entity.
      required: true
      selector:
        entity:
          domain: sensor
          integration: estrannaise
